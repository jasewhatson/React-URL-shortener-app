[{"/Users/jase/src/the-station-url-shortener/url-shortener-react-js/src/index.js":"1","/Users/jase/src/the-station-url-shortener/url-shortener-react-js/src/reportWebVitals.js":"2","/Users/jase/src/the-station-url-shortener/url-shortener-react-js/src/App.js":"3","/Users/jase/src/the-station-url-shortener/React-URL-shortener-app/src/index.js":"4","/Users/jase/src/the-station-url-shortener/React-URL-shortener-app/src/App.js":"5","/Users/jase/src/the-station-url-shortener/React-URL-shortener-app/src/reportWebVitals.js":"6"},{"size":535,"mtime":1664277119771,"results":"7","hashOfConfig":"8"},{"size":362,"mtime":1664277119771,"results":"9","hashOfConfig":"8"},{"size":3724,"mtime":1664341523404,"results":"10","hashOfConfig":"8"},{"size":535,"mtime":1664347142761,"results":"11","hashOfConfig":"12"},{"size":3724,"mtime":1664347142762,"results":"13","hashOfConfig":"12"},{"size":362,"mtime":1664347142759,"results":"14","hashOfConfig":"12"},{"filePath":"15","messages":"16","suppressedMessages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"g1xvuj",{"filePath":"19","messages":"20","suppressedMessages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"22","messages":"23","suppressedMessages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25"},{"filePath":"26","messages":"27","suppressedMessages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"zmhx7b",{"filePath":"29","messages":"30","suppressedMessages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"32","messages":"33","suppressedMessages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/jase/src/the-station-url-shortener/url-shortener-react-js/src/index.js",[],[],[],"/Users/jase/src/the-station-url-shortener/url-shortener-react-js/src/reportWebVitals.js",[],[],"/Users/jase/src/the-station-url-shortener/url-shortener-react-js/src/App.js",["35","36"],[],"/*\nTODO: Logic to not submit duplicate URL's which are already in our DB\nTODO: Provide msg on success copy to clipboard to user & success URL shorten\nTODO: Remove use of !important in App.css - temp quick fix to resolve conflicts\n*/\nimport './App.css';\nimport './css/main.css';\nimport { React, useState } from \"react\";\nimport axios from \"axios\";\n\nconst Results = (props) => (\n  <div className=\"errorMessage\">\n    Error: {props.msg}\n  </div>\n)\n\nfunction App() {\n\n  const [userInput, setUserInput] = useState(\"\");\n  var savedLinks = JSON.parse(window.localStorage.getItem('users_short_links'));\n  const [shortenedLinks, setShortenedLinks] = useState(savedLinks ?? []); //https://usefulangle.com/post/281/javascript-default-value-if-null-or-undefined\n  const [showError, setShowError] = useState(false);\n  const [showErrorMsg, setShowErrorMsg] = useState(\"\");\n\n  const isValidHttpUrl = (string) => {\n    let url;\n    try {\n      url = new URL(string);\n    } catch (_) {\n      return false;  \n    }\n    return url.protocol === \"http:\" || url.protocol === \"https:\";\n  }\n\n  const fetchShortURL = async () => {\n\n    if(userInput == \"\"){\n      setShowError(true);\n      setShowErrorMsg(\"No value provided\");\n      console.log(\"No value provided\");\n      return;\n    }else if(isValidHttpUrl(userInput) == false){\n      setShowError(true);\n      setShowErrorMsg(\"Invalid url provided\");\n      console.log(\"Invalid url provided\");\n      return;\n    }else{\n      setShowError(false);\n      setShowErrorMsg(\"\");\n    }\n\n    try {\n      const response = await axios(\n        `https://api.shrtco.de/v2/shorten?url=${userInput}`\n      );\n\n      var newLinkJSON = {\n        \"orig_url\": userInput,\n        \"short_url\": response.data.result.full_short_link,\n        \"time_created\": Date.now()\n      };\n\n      var newShortenedLinks = shortenedLinks.slice();   //https://stackoverflow.com/questions/26505064/what-is-the-best-way-to-add-a-value-to-an-array-in-state\n      newShortenedLinks.push(newLinkJSON);\n      window.localStorage.setItem('users_short_links', JSON.stringify(newShortenedLinks));\n      setShortenedLinks(newShortenedLinks); //https://bobbyhadz.com/blog/react-map-array-reverse\n\n    } catch (e) {\n      setShowError(true);\n      setShowErrorMsg(\"Error on api call - \" + e.toString());\n      console.log(e);\n    }\n  };\n\n  return (\n\n    <div>\n      <h1>URL shortener app</h1>\n      <br></br>\n      <table className=\"table table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">#</th>\n            <th scope=\"col\">Original URL</th>\n            <th scope=\"col\">Short URL</th>\n            <th scope=\"col\">&nbsp;</th>\n          </tr>\n        </thead>\n        <tbody>\n          {\n            shortenedLinks.map((link, index) => (\n              <tr key={link.time_created} id={link.time_created}>\n                <th scope=\"row\">{index + 1}</th>\n                <td>{link.orig_url}</td>\n                <td>{link.short_url}</td>\n                <td><button className=\"btn btn-primary\" onClick={() => { navigator.clipboard.writeText(shortenedLinks[index].short_url) }}>Copy to clipboard</button></td>\n              </tr>\n            ))}\n        </tbody>\n      </table>\n      { showError ? <Results msg={showErrorMsg}/> : null }           \n      <input\n        className=\"form-control\"\n        type=\"text\"\n        placeholder=\"Enter link to be shortened\"\n        value={userInput}\n        onChange={(e) => {\n          setUserInput(e.target.value);\n        }}\n      />\n      <div>\n        <button\n          className=\"btn btn-primary btn-submit-url\"\n          onClick={() => {\n            fetchShortURL();\n          }}\n        >\n          Submit URL\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","/Users/jase/src/the-station-url-shortener/React-URL-shortener-app/src/index.js",[],[],"/Users/jase/src/the-station-url-shortener/React-URL-shortener-app/src/App.js",["37","38"],[],"/Users/jase/src/the-station-url-shortener/React-URL-shortener-app/src/reportWebVitals.js",[],[],{"ruleId":"39","severity":1,"message":"40","line":37,"column":18,"nodeType":"41","messageId":"42","endLine":37,"endColumn":20},{"ruleId":"39","severity":1,"message":"40","line":42,"column":40,"nodeType":"41","messageId":"42","endLine":42,"endColumn":42},{"ruleId":"39","severity":1,"message":"40","line":37,"column":18,"nodeType":"41","messageId":"42","endLine":37,"endColumn":20},{"ruleId":"39","severity":1,"message":"40","line":42,"column":40,"nodeType":"41","messageId":"42","endLine":42,"endColumn":42},"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected"]